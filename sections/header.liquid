<header class="header" aria-label="Site header">
  <div class="header__left">
    {% if section.settings.logo != blank %}
      <a href="{{ routes.root_url }}" class="header__logo" aria-label="{{ shop.name }}">
        <img src="{{ section.settings.logo | image_url: width: 120 }}" alt="{{ shop.name }}" height="40" loading="lazy">
      </a>
    {% else %}
      <a href="{{ routes.root_url }}" class="header__logo" aria-label="{{ shop.name }}">
        <img src="{{ "logo.svg" | asset_url }}" alt="{{ shop.name }}" height="40" loading="lazy">
      </a>
    {% endif %}
  </div>

  <nav class="header__nav" aria-label="Main navigation">
    <ul class="header__menu" role="list">
      {% for link in section.settings.menu.links %}
        <li>
          <a href="{{ link.url }}" class="header__menu-link" tabindex="0">{{ link.title }}</a>
        </li>
      {% endfor %}
    </ul>
  </nav>

  <div class="header__actions">
    <button class="header__search" aria-label="Search" tabindex="0" type="button">
      {{ 'icon-search.svg' | inline_asset_content }}
    </button>
    {% if shop.customer_accounts_enabled %}
      <a href="{{ routes.account_url }}" class="header__account" aria-label="Account" tabindex="0">
        {{ 'icon-account.svg' | inline_asset_content }}
      </a>
    {% endif %}
    <a href="{{ routes.cart_url }}" class="header__cart" aria-label="Cart" tabindex="0">
      {% if cart.item_count > 0 %}
        <sup class="header__cart-count">{{ cart.item_count }}</sup>
      {% endif %}
      {{ 'icon-cart.svg' | inline_asset_content }}
    </a>
  </div>
</header>

{% stylesheet %}
  .header {
    --header-height: 5rem;
    height: var(--header-height);
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding-inline: var(--page-margin, 1.5rem);
    background: var(--color-background);
  }
  .header__left {
    display: flex;
    align-items: center;
    min-width: 0;
  }
  .header__logo img {
    display: block;
    max-height: 40px;
    width: auto;
  }
  .header__title {
    font-size: 1.5rem;
    margin: 0;
    font-weight: 700;
    letter-spacing: 0.02em;
  }
  .header__nav {
    flex: 1 1 auto;
    display: flex;
    justify-content: center;
    background: var(--color-background-nav, transparent);
    border-bottom: 1px solid var(--color-border, #eee);
    min-height: 3rem;
  }
  .header__menu {
    display: flex;
    gap: 1.5rem;
    list-style: none;
    margin: 0;
    padding: 0;
    align-items: center;
  }
  .header__menu-link {
    color: var(--color-foreground);
    text-decoration: none;
    font-weight: 500;
    font-size: 1rem;
    transition: color 0.2s;
    padding: 0.5rem 0.75rem;
    border-radius: 0.25rem;
    display: block;
  }
  .header__menu-link:focus,
  .header__menu-link:hover {
    color: var(--color-accent);
    background: var(--color-background-hover, #f5f5f5);
    outline: none;
  }
  .header__actions {
    display: flex;
    align-items: center;
    gap: 1rem;
  }
  .header__search,
  .header__account,
  .header__cart {
    background: none;
    border: none;
    padding: 0.25rem;
    display: flex;
    align-items: center;
    cursor: pointer;
    color: var(--color-foreground);
    position: relative;
  }
  .header__search svg,
  .header__account svg,
  .header__cart svg {
    width: 2rem;
    height: 2rem;
    display: block;
  }
  .header__cart-count {
    position: absolute;
    top: -0.5rem;
    right: -0.5rem;
    background: var(--color-accent);
    color: #fff;
    border-radius: 50%;
    font-size: 0.75rem;
    min-width: 1.25em;
    height: 1.25em;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0 0.4em;
    font-weight: 700;
    line-height: 1;
  }
  @media screen and (max-width: 768px) {
    .header {
      flex-direction: column;
      height: auto;
      gap: 0.5rem;
      padding-inline: 1rem;
    }
    .header__menu {
      gap: 1rem;
      font-size: 0.95rem;
    }
    .header__actions {
      gap: 0.5rem;
    }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "t:general.header",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo"
    },
    {
      "type": "link_list",
      "id": "menu",
      "label": "t:labels.menu"
    }
  ]
}
{% endschema %}
